---
id: jetpack-compose
title: Jetpack Compose Integration
description: Using Tolgee Android SDK with Jetpack Compose
---

> **NOTE:**
> For managing static translations, we recommend using [Tolgee CLI](https://github.com/tolgee/tolgee-cli).

# Jetpack Compose Integration

Tolgee Android SDK provides seamless integration with Jetpack Compose, allowing you to create localized composables with reactive updates.

## Setup

Using Version Catalog is highly recommended to keep your versions aligned.

```toml
# gradle/libs.versions.toml
[libraries]
tolgee = { group = "io.tolgee.mobile-kotlin-sdk", name = "compose", version.ref = "tolgee" }
```

```kotlin
// build.gradle.kts
dependencies {
    implementation(libs.tolgee)
}
```

Create a network security config file `network_security.xml` in your `res/xml` folder:

```xml
<?xml version="1.0" encoding="utf-8"?>
<network-security-config xmlns:android="http://schemas.android.com/apk/res/android">
    <domain-config>
        <domain includeSubdomains="true">tolgee.io</domain>
        <domain includeSubdomains="true">tolg.ee</domain>
    </domain-config>
</network-security-config>
```

Add network security config to your `AndroidManifest.xml`:

```xml
<application
        android:networkSecurityConfig="@xml/network_security"> <!-- Add this line to your existing application tag -->
</application>
```

## Initialization

Initialize Tolgee in your Application class (Android):

```kotlin
class MyApplication : Application() {
    override fun onCreate() {
        super.onCreate()

        Tolgee.init {
            contentDelivery {
                url = "https://cdn.tolg.ee/your-cdn-url-prefix"
                storage = TolgeeStorageProviderAndroid(this@MyApplication, BuildConfig.VERSION_CODE)
            }
        }
    }
}
```

## Usage

```kotlin
@Composable
fun SimpleText() {
    // Use the stringResource extension function
    Text(text = stringResource(R.string.welcome_message))
}

@Composable
fun TextWithParameters(name: String) {
    // Pass parameters to your translations
    Text(text = stringResource(R.string.welcome_user, name))
}

@Composable
fun PluralText(count: Int) {
    // Handle plural forms
    Text(text = pluralStringResource(R.plurals.item_count, count, count))
}
```

## Advanced Usage

### Explicit Tolgee Instance

If you need to use a specific Tolgee instance (not the singleton), you can pass it explicitly:

```kotlin
@Composable
fun ExplicitInstance() {
    val tolgee = remember { /* your custom Tolgee instance */ }

    Text(text = stringResource(tolgee, Res.string.welcome_message))
}
```

### Locale Switching

You can create a locale switcher component:

```kotlin
@Composable
fun LocaleSwitcher() {
    val tolgee = Tolgee.instance
    val currentLocale = tolgee.changeFlow.mapLatest {
        tolgee.getLocale()
    }.collectAsState(initial = tolgee.getLocale())

    Row {
        Text(text = stringResource(tolgee, R.string.selected_locale, currentLocale.language))
        Button(onClick = { tolgee.setLocale("en") }) {
            Text("English")
        }
        Button(onClick = { tolgee.setLocale("fr") }) {
            Text("Français")
        }
        Button(onClick = { tolgee.setLocale("cs") }) {
            Text("Čeština")
        }
    }
}
```

### Observing Locale Changes

```kotlin
@Composable
fun LocaleAwareComponent() {
    val tolgee = Tolgee.instance

    // This will cause recomposition when the locale changes
    val currentLocale = tolgee.changeFlow.mapLatest {
        tolgee.getLocale()
    }.collectAsState(initial = tolgee.getLocale())

    // Your UI that depends on the current locale
    Text(text = currentLocale.language)
}
```

## Troubleshooting

### Translations Not Updating

- Ensure you're using the `stringResource` and `pluralStringResource` functions from the Tolgee package
- Check that your Tolgee instance is properly initialized
- Verify that the translations are loaded correctly

### Android Resource Integration Issues

- Check that your Android resources are properly structured - Tolgee is using `resources.getResourceEntryName` to find key for the resource
- Ensure that the Tolgee instance has access to the Android context

### Compose Multiplatform Issues

- Verify that your resource files are correctly set up and all keys present in resources are present in a Tolgee platform too
- Ensure that you're using the correct resource references
